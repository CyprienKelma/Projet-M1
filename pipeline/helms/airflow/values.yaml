airflow:
  executor: "KubernetesExecutor"
  extraPipPackages:
    - "minio"
    - "duckdb"
    - "psycopg2-binary"
    - "pandas"
    - "apache-airflow-providers-cncf-kubernetes"
  config:
    core:
      load_examples: true

  dags:
    persistence:
      enabled: false
    gitSync:
      enabled: true
      repo: "https://github.com/CyprienKelma/Projet-M1.git"
      branch: pipeline-dev
      subPath: pipeline/workflows
      rev: HEAD
      depth: 1
      wait: 5
      maxFailures: 1
      env :
        - name: GIT_SYNC_SUBMODULES
          value: "off"

  web:
    port: 8080

  workers:
    replicas: 1

  flower:
    enabled: true

  logs:
    persistence:
      enabled: false

  createUserJob:
    useHelmHooks: true

  serviceAccount:
    create: true

  rbac:
    create: true

  extraEnvs:
    - name: AIRFLOW__KUBERNETES__NAMESPACE
      value: airflow
    - name: GIT_SYNC_SUBMODULE
      value: "off"