airflow:
  executor: "KubernetesExecutor"
  extraPipPackages:
    - "minio"
    - "duckdb"
    - "psycopg2-binary"
    - "pandas"
    - "apache-airflow-providers-cncf-kubernetes"

  config:
    core:
      load_examples: true

  web:
    port: 8080

  workers:
    replicas: 1

  flower:
    enabled: true

  logs:
    persistence:
      enabled: false

  createUserJob:
    useHelmHooks: true

  serviceAccount:
    create: true

  rbac:
    create: true

  extraEnvs:
    - name: AIRFLOW__KUBERNETES__NAMESPACE
      value: airflow
    - name: GIT_SYNC_SUBMODULE
      value: "off"

dags:
  gitSync:
    enabled: true
    repo: "https://github.com/CyprienKelma/Projet-M1.git"
    branch: "pipeline-dev"
    subPath: "pipeline/dags"
    rev: HEAD
    depth: 1
    wait: 10
    maxFailures: 10
    env:
      - name: GIT_SYNC_SUBMODULES
        value: "off"
  persistence:
    enabled: false
